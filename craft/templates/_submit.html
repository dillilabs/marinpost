{% macro actionUrl() %}
{% spaceless %}
  {% if currentUser.inGroup("contributor") %}
    entries/SaveEntry
  {% else %}
    guestEntries/SaveEntry
  {% endif %}
{% endspaceless %}
{% endmacro %}

{% macro redirectTo(section) %}
{% spaceless %}
  {% if currentUser.inGroup("contributor") %}
    {{ section }}/{postDate.year}/{postDate.month}/{postDate.day}/{slug}
  {% else %}
    submit/thank-you
  {% endif %}
{% endspaceless %}
{% endmacro %}

{% macro categoryId(entry, fieldName, defaultId, limit) %}
{% spaceless %}
  {% set selected = defaultId | default(0) %}
  {% set criteria = attribute(entry, fieldName) %}
  {% if criteria is defined %}
    {% for cat in criteria.limit(limit | default(1))  %}
      {% set selected = cat.id %}
    {% endfor %}
  {% endif %}
  {{ selected }}
{% endspaceless %}
{% endmacro %}
