{% set user = craft.users.id(craft.request.segments(3)).first %}

{% if not user or not user.inGroup("contributor") %}
  {% redirect "404" %}
{% endif %}

{% set imageSize = 200 %}

{% extends "_common/layout" %}

{% block main %}
  {% embed "_common/single" %}
    {% block post %}

      {% if user.photoUrl %}
        <img src="{{ user.photoUrl(imageSize) }}" />
      {% endif %}

      <h3>{{ user.name }}</h3>

      <p>{{ user.city }}, {{ user.state }}</p>

      {% if user.bio %}
        <p>{{ user.bio }}</p>
      {% endif %}

      <ul>
      {% for entry in craft.entries.authorId(user.id) %}
        <li>
          {{ entry.postDate | date('M d, Y') }}
          [{{ entry.section.name }}]
          <a href="{{ entry.url | default(url(entry.section.handle))  }}">{{ entry.title }}</a>
          {% if currentUser.id == user.id %}
            [<a href="/edit/{{ entry.id }}">edit</a>]
          {% endif %}
        </li>
      {% endfor %}
      </ul>
    {% endblock %}
  {% endembed %}
{% endblock %}
