{% spaceless %}

{# set searchTerm = craft.request.segment(2) #}

{% set searchTerm = craft.request.queryString | split('=') | last %}

{% set searchPattern = 'name:*'~searchTerm ~'*' %}

{% set tagLimit = 20 %}

{% set tags = [] %}

{% for tag in craft.tags.group(tagGroup).search(searchPattern).order('score').limit(tagLimit) %}

  {% set tags = tags | merge([ { 'label': tag.name, 'value': tag.id } ]) %}

{% endfor %}

{% endspaceless %}
{{- tags | json_encode | raw -}}
