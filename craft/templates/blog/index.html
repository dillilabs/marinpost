{% extends "_layout" %}

{% set title = "Blog" %}

{% set limit = 2 %}{# TODO set higher after testing #}

{% block content %}
  {% embed "_filtered_content.html" %}
    {% block main %}
      <h2>Blog</h2>
      <ul class="posts" id="filtered-content">
      {% for entry in craft.entries.section('blog').limit(limit).find %}
        {{ macro.entry(entry) }}
      {% endfor %}
      </ul>
      <a href="#" id="load-more-content">Load More Content</a>
    {% endblock %}

    {% block aside %}
      <div class="filter" id="filters">
        <h2>Filter</h2>
        <fieldset>
          <h5>Locations</h5>
          <ul>
            <li><input type="checkbox" class="location all" value="all" checked="checked" />All</li>
            {% set locations = craft.categories.group('locations') %}
            {% for location in locations %}
            <li><input type="checkbox" class="location filter" value="{{ location.id }}"/>{{ location.title }}</li>
            {% endfor %}
          </ul>
        </fieldset>
        <fieldset>
          <h5>Topics</h5>
          <ul>
            <li><input type="checkbox" class="topic all" value="all" checked="checked" />All</li>
            {% set topics = craft.categories.group('topics') %}
            {% for topic in topics %}
            <li><input type="checkbox" class="topic filter" value="{{ topic.id }}"/>{{ topic.title }}</li>
            {% endfor %}
          </ul>
        </fieldset>
      </div>
    {% endblock %}

    {% block right %}
      {% include "_support.html" %}
    {% endblock %}
  {% endembed %}
{% endblock %}
