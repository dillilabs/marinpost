{% from "_macro.html" import errorList %}
{% from "_submit.html" import imageBy, imageDisclaimer %}

{% set uploadingPrimaryImage = false %}
{% if entry is defined %}
  {% if entry.primaryImage | length > 0 %}
    {% set uploadingPrimaryImage = true %}
  {% endif %}
{% endif %}

<input type="checkbox" class="image-upload toggle" {%- if uploadingPrimaryImage %}checked="checked"{% endif %}>Upload an image

<div class="image-upload inputs" {%- if not uploadingPrimaryImage %}style="display: none;"{% endif %}>
  <label for="primaryImage">Primary Image</label>
  <input type="hidden" name="fields[primaryImage]">
  <input type="hidden" name="fields[primaryImage][new1][type]" value="image">
  <input type="hidden" name="fields[primaryImage][new1][fields][image]" value="">
  <input type="file" name="fields[primaryImage][new1][fields][image][]">
  <br>

  <label for="primaryImage-by">Image By</label>
  <input type="text" name="fields[primaryImage][new1][fields][by]" autocomplete="off" {%- if entry is defined %}value="{{ imageBy(entry) }}"{% endif %}>
  <br>

  <label for="primaryImage-disclaimer">Legal</label>
  <input type="hidden" name="fields[primaryImage][new1][fields][disclaimer]" value="">
  <input type="checkbox" name="fields[primaryImage][new1][fields][disclaimer][]" value="Yes I have the right to use this image" {%- if entry is defined and imageDisclaimer(entry) %}checked{% endif %}>
  <span>Yes I have the right to use this image</span>

  {% if entry is defined %}
    {{ errorList(entry.getErrors('primaryImage')) }}
  {% endif %}
</div>

<br>
