{% extends "_layouts/cp" %}

{% set title = "Block User"|t %}

{% set tabs = {
  home: { label: "Home"|t, url: url('mpcontrolpanel') },
  block: { label: "Block User"|t, url: url('mpcontrolpanel/block') },
  archived: { label: "Archived Entries"|t, url: url('mpcontrolpanel/archived') }
} %}
{% set selectedTab = 'blocked' %}

{% set content %}
  <div class="elements">
    {% set users = craft.users | without(currentUser) %}

    <form class="block-user">
      <input type="hidden" name="action" value="mpUser/blockUser">
      <select name="id">
        <option></option>
        {% for user in users %}
          <option value="{{ user.id }}">{{ user }}</option>
        {% endfor %}
      </select>
      <input type="submit" value="Block" disabled>
    </form>
  </div>
{% endset %}

{% set js %}
var form = $('form.block-user');
var select = form.find('select[name=id]');
var submit = form.find('input[type=submit]');

select.change(function() {
  submit.prop('disabled', !this.value.length);
});

form.submit(function(e) {
  if (!confirm('Are you sure?')) {
    e.preventDefault();
  }
});
{% endset %}
{% includeJs js %}
